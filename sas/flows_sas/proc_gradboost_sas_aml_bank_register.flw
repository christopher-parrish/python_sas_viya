{"creationTimeStamp":null,"modifiedTimeStamp":null,"createdBy":null,"modifiedBy":null,"version":2,"sourceVersion":1,"id":null,"name":"aml_bank_register_flow.flw","description":null,"properties":{"UI_PROP_DF_OPTIMIZE":"false","UI_PROP_DF_ID":"878194b1-6698-4af5-9768-188746dcf300","UI_PROP_DF_EXECUTION_ORDERED":"false"},"links":[],"nodes":{"id-1718393414513-3048":{"nodeType":"outputTable","version":1,"id":"id-1718393414513-3048","name":"gradboost_astore","note":{"version":1,"id":"id-1718393414513-3052","name":null,"description":null,"properties":{"UI_NOTE_PROP_IS_EXPANDED":"false","UI_NOTE_PROP_HEIGHT":"0","UI_NOTE_PROP_WIDTH":"0","UI_NOTE_PROP_IS_STICKYNOTE":"false"}},"priority":0,"properties":{"UI_PROP_TABLE_URI":"SASData://CASUSER?PROCGRADBOOST_ASTORE","UI_PROP_XPOS":"307","UI_PROP_YPOS":"148","UI_PROP_COLORGRP":"0","UI_PROP_IS_INPUT_EXPANDED":"false","UI_PROP_IS_OUTPUT_EXPANDED":"false","UI_PROP_USE_PERSISTED_TABLE_STRUCTURE":"false","UI_PROP_NODE_DATA_ID":"table","UI_PROP_PORT_ID|inTable|0":"e7ec92bc-7917-4853-bfeb-5e824f5f35a8","UI_PROP_PORT_LABEL|inTable|0":null,"UI_PROP_PORT_DESCRIPTION|inTable|0":null,"UI_PROP_PORT_ID|outTable|0":"a9098ffd-23db-49db-9d62-34e4c240f623","UI_PROP_PORT_LABEL|outTable|0":null,"UI_PROP_PORT_DESCRIPTION|outTable|0":null},"tableReference":{"referenceType":"parameter","parameterId":"id-1718393414513-3048"},"outputTableArguments":{"advancedOptions":[],"arguments":{"CAS":{"promote":false,"replaceWithPromote":false,"persist":false,"replaceWithPersist":false}}}},"id-1718392836461-1639":{"nodeType":"step","version":1,"id":"id-1718392836461-1639","name":"Register SAS Model","note":{"version":1,"id":"id-1718392836462-1643","name":null,"description":null,"properties":{"UI_NOTE_PROP_IS_EXPANDED":"false","UI_NOTE_PROP_HEIGHT":"0","UI_NOTE_PROP_WIDTH":"0","UI_NOTE_PROP_IS_STICKYNOTE":"false"}},"priority":1,"properties":{"UI_PROP_XPOS":"437","UI_PROP_YPOS":"149","UI_PROP_COLORGRP":"0","UI_PROP_IS_INPUT_EXPANDED":"false","UI_PROP_IS_OUTPUT_EXPANDED":"false","UI_PROP_NODE_DATA_ID":"f21e546b-f1f4-47f8-b3d4-81ec9239ac4e","UI_PROP_NODE_DATA_MODIFIED_DATE":"1713623027483","UI_PROP_PORT_ID|astore|0":"d53bcd2b-e71a-464a-935d-1d07b04e1890","UI_PROP_PORT_LABEL|astore|0":"Analytic Store","UI_PROP_PORT_DESCRIPTION|astore|0":null,"UI_PROP_PORT_ID|scoredTable|0":"d9a2abc6-e550-48e0-958d-cc7cf279137d","UI_PROP_PORT_LABEL|scoredTable|0":"Scored Table","UI_PROP_PORT_DESCRIPTION|scoredTable|0":null},"stepReference":{"type":"uri","path":"/dataFlows/steps/f21e546b-f1f4-47f8-b3d4-81ec9239ac4e"},"arguments":{"modelName":"aml_bank_gradboost","modelDesc":"","modelType":{"label":"Analytic store","value":"sasast"},"scoreCode":"","projectName":"Anti-Money Laundering","projectLoc":"DMRepository","newVersion":false,"hasScoredData":true,"targetLevel":{"label":"Use a binary target","value":"binary"},"targetVar":[{"referenceType":"column","version":1,"port":"scoredTable","portIndex":0,"columnName":"ml_indicator","inputPortIndex":0,"inputPort":"scoredTable"}],"targetEvent":{"value":1},"eventProbVar":[{"referenceType":"column","version":1,"port":"scoredTable","portIndex":0,"columnName":"P_ml_indicator1","inputPortIndex":0,"inputPort":"scoredTable"}],"useTrainPart":true,"trainSamplePct":"30","useTestPart":true,"testSamplePct":"40","sampleSeed":1234,"numbins":{"label":"Semi-decile","value":"20"},"maxIter":50,"cutoff":0.05,"nonEvenProbVar":[{"referenceType":"column","version":1,"port":"scoredTable","portIndex":0,"columnName":"P_ml_indicator0","inputPortIndex":0,"inputPort":"scoredTable"}],"nonTargetEvent":{"value":0},"astore":{"referenceType":"inputPort","portName":"astore","portIndex":0},"scoredTable":{"referenceType":"inputPort","portName":"scoredTable","portIndex":0}}},"id-1718392919930-2141":{"nodeType":"step","version":1,"id":"id-1718392919930-2141","name":"proc_gradboost_sas_aml_bank","note":{"version":1,"id":"id-1718392919931-2145","name":null,"description":null,"properties":{"UI_NOTE_PROP_IS_EXPANDED":"false","UI_NOTE_PROP_HEIGHT":"0","UI_NOTE_PROP_WIDTH":"0","UI_NOTE_PROP_IS_STICKYNOTE":"false"}},"priority":2,"properties":{"UI_PROP_XPOS":"168","UI_PROP_YPOS":"151","UI_PROP_COLORGRP":"0","UI_PROP_IS_INPUT_EXPANDED":"false","UI_PROP_IS_OUTPUT_EXPANDED":"false","UI_PROP_INPUT_PORT|inTables|0":"80e88c78-6b70-4e40-abb2-7f2b325157eb|Input table 1|Input tables","UI_PROP_NODE_DATA_ID":"a7190700-f59c-4a94-afe2-214ce639fcde","UI_PROP_NODE_DATA_MODIFIED_DATE":"1693582637930","UI_PROP_PORT_ID|outTables|0":"5b6af769-99e9-4568-98b6-801b21b723fc","UI_PROP_PORT_LABEL|outTables|0":"Output table 1","UI_PROP_PORT_DESCRIPTION|outTables|0":"Output tables","UI_PROP_PORT_ID|outTables|1":"33d654da-f471-4706-b8ee-30f21028429b","UI_PROP_PORT_LABEL|outTables|1":"Output table 2","UI_PROP_PORT_DESCRIPTION|outTables|1":"Output tables"},"portMappings":[{"mappingType":"tableStructure","portName":"outTables","portIndex":0,"tableStructure":{"columnDefinitions":[{"name":"_index_","index":0,"type":"Numeric","rawLength":8,"formattedLength":0,"version":2,"links":[],"attributes":{}},{"name":"_state_","index":1,"type":"Varchar","rawLength":132878,"formattedLength":0,"version":2,"links":[],"attributes":{}}]}},{"mappingType":"tableStructure","portName":"outTables","portIndex":1,"tableStructure":{"columnDefinitions":[{"name":"ml_indicator","label":"indicator for money laundering event no (0), yes (1)","index":0,"type":"Numeric","rawLength":8,"formattedLength":0,"version":2,"links":[],"attributes":{}},{"name":"account_id","label":"unique identifier","index":1,"type":"Numeric","rawLength":8,"formattedLength":0,"version":2,"links":[],"attributes":{}},{"name":"analytic_partition","index":2,"type":"Numeric","rawLength":8,"formattedLength":0,"version":2,"links":[],"attributes":{}},{"name":"I_ml_indicator","label":"Into: ml_indicator","index":3,"type":"Char","rawLength":32,"formattedLength":0,"version":2,"links":[],"attributes":{}},{"name":"_MissIt_","index":4,"type":"Numeric","rawLength":8,"formattedLength":0,"version":2,"links":[],"attributes":{}},{"name":"P_ml_indicator1","label":"Predicted: ml_indicator=1           ","index":5,"type":"Numeric","rawLength":8,"formattedLength":0,"version":2,"links":[],"attributes":{}},{"name":"P_ml_indicator0","label":"Predicted: ml_indicator=0           ","index":6,"type":"Numeric","rawLength":8,"formattedLength":0,"version":2,"links":[],"attributes":{}}]}}],"stepReference":{"type":"uri","path":"/dataFlows/steps/a7190700-f59c-4a94-afe2-214ce639fcde"},"arguments":{"codeOptions":{"code":"cas casauto sessopts=(caslib=casuser, metrics=true, timeout=900);\n\n/* set macro variables */\n\n%let in_mem_tbl = 'aml_bank_prep';\n%let caslib_ref = 'casuser';\n%let caslib_ref_noquote = casuser.;\n%let libname_in_mem_tbl = &caslib_ref_noquote.aml_bank_prep;\n%let libname_out_model = &caslib_ref_noquote.procgradboost_model;\n%let out_model = \"procgradboost_model\";\n%let libname_out_score = &caslib_ref_noquote.procgradboost_score;\n%let out_score = \"procgradboost_score\";\n%let libname_out_astore = &caslib_ref_noquote.procgradboost_astore;\n%let out_astore = \"procgradboost_astore\";\n%let libname_out_score_code = &caslib_ref_noquote.procgradboost_score_code;\n%let out_score_code = \"procgradboost_score_code\";\n%let libname_cas_out_model = &caslib_ref_noquote.casgradboost_model;\n%let cas_out_model = \"casgradboost_model\";\n%let libname_cas_out_score = &caslib_ref_noquote.casgradboost_score;\n%let cas_out_score = \"casgradboost_score\";\n%let libname_cas_out_astore = &caslib_ref_noquote.casgradboost_astore;\n%let cas_out_astore = \"casgradboost_astore\";\n%let libname_cas_out_score_code = &caslib_ref_noquote.casgradboost_score_code;\n%let cas_out_score_code = \"casgradboost_score_code\";\n%let libname_cas_out_assess = &caslib_ref_noquote.casgradboost_assess;\n%let cas_out_assess = \"casgradboost_assess\";\n%let libname_cas_out_assess_roc = &caslib_ref_noquote.casgradboost_assess;\n%let cas_out_assess_roc = \"casgradboost_asssess_roc\";\n%let target = 'ml_indicator';\n%let target_noquote = ml_indicator;\n%let predicted = P_ml_indicator;\n%let predictedvars = \"P_ml_indicator0\", \"P_ml_indicator1\";\n%let predictedtarget = 'P_ml_indicator1';\n%let predictedtarget_noquote = P_ml_indicator1;\n%let predictedevent_noquote = I_ml_indicator;\n%let partition = analytic_partition;\n%let copyvarstooutput = account_id analytic_partition;\n%let inputs = {\n\t\t\t\"checking_only_indicator\", \"prior_ctr_indicator\", \"address_change_2x_indicator\",\n\t\t\t\"cross_border_trx_indicator\", \"in_person_contact_indicator\",\n\t\t\t\"linkedin_indicator\", \"atm_deposit_indicator\", \"trx_10ksum_indicator\",\n\t\t\t\"common_merchant_indicator\", \"direct_deposit_indicator\", \"marital_status_single\",\n\t\t\t\"primary_transfer_cash\", \"citizenship_country_risk\", \"occupation_risk\", \n\t\t\t\"credit_score\", \"distance_to_bank\", \"distance_to_employer\", \n\t\t\t\"income\", \"num_acctbal_chgs_gt2000\", \"num_transactions\"};\n%let inputs_noquoteorcomma = \n\t\t\tchecking_only_indicator prior_ctr_indicator address_change_2x_indicator\n\t\t\tcross_border_trx_indicator in_person_contact_indicator\n\t\t\tlinkedin_indicator atm_deposit_indicator trx_10ksum_indicator\n\t\t\tcommon_merchant_indicator direct_deposit_indicator marital_status_single\n\t\t\tprimary_transfer_cash citizenship_country_risk occupation_risk \n\t\t\tcredit_score distance_to_bank distance_to_employer \n\t\t\tincome num_acctbal_chgs_gt2000 num_transactions;\n%let bias_var = \"cross_border_trx_indicator\";\n%let partial_dep_var = \"credit_score\";\n\n\n/* load training table into memory */\n\nproc cas;\n\t\ttable.tableExists result=code /\n\t\t\tcaslib=&caslib_ref, name=&in_mem_tbl;\n\t\t\tif code['exists'] <= 0 then do;\n\t\t\t\ttable.loadTable /\n\t\t\t\t\tcaslib=&caslib_ref,\n\t\t\t\t\tpath=cats(&in_mem_tbl,'.sashdat'),\n\t\t\t\t\tcasout={caslib=&caslib_ref,\n\t\t\t\t\t\tname=&in_mem_tbl,\n\t\t\t\t\t\tpromote=TRUE};\n\t\t\tend;\n\t\ttable.columnInfo result=col_list /\n\t\t\ttable={caslib=&caslib_ref, name=&in_mem_tbl};\n\t\t\tdescribe col_list;\n\t\t\tprint col_list.ColumnInfo[,'Column'];\nrun;\n\n\n/* proc gradboost procedure */\n\nproc gradboost data=&libname_in_mem_tbl\n\t\toutmodel=&libname_out_model\n\t\tseed=12345\n     \tntrees=100\n\t\tlearningrate=0.1 \n\t\tsamplingrate=0.5 \n\t\tlasso=0 \n\t\tridge=1 \n\t\tmaxbranch=2\n\t\tmaxdepth=5\n\t\tminleafsize=5\n\t\tassignmissing=USEINSEARCH \n\t\tminuseinsearch=1\n\t\tnomsearch(maxcategories=128)\n\t\tnumBin=50 \n\t\tbinmethod=QUANTILE\n\t\tearlystop(tolerance=0 stagnation=5 minimum=NO metric=MCR);\n\t\t*autotune;\n\t\t*code file=;\n\t\t*crossvalidation;\n\t\t*weight;\n\t\tid &target_noquote;\n\t\tpartition rolevar=&partition (train='1' validate='0' test='2');\n\t\tinput &inputs_noquoteorcomma / level=interval; \t\t\n\t\ttarget &target_noquote / level=nominal;\n\t\toutput out=&libname_out_score \n\t\t\t\t\tcopyvars=(&copyvarstooutput);\n\t\tsavestate rstore=&libname_out_astore;\n\t\tods output\n\t\t\tVariableImportance=work.varimportance\n\t\t\tFitstatistics=work.fitstatistics;\nrun;","logHTML":"","resultsHTML":"","variables":[{"name":"_output1","value":{"referenceType":"outputPort","portName":"outTables","portIndex":0,"arguments":{}}},{"name":"_output2","value":{"referenceType":"outputPort","portName":"outTables","portIndex":1,"arguments":{}}},{"name":"_input1","value":{"referenceType":"inputPort","portName":"inTables","portIndex":0}}],"contentType":"embedded"}}},"id-1718393498807-3389":{"nodeType":"outputTable","version":1,"id":"id-1718393498807-3389","name":"gradboost_score","note":{"version":1,"id":"id-1718393498808-3393","name":null,"description":null,"properties":{"UI_NOTE_PROP_IS_EXPANDED":"false","UI_NOTE_PROP_HEIGHT":"0","UI_NOTE_PROP_WIDTH":"0","UI_NOTE_PROP_IS_STICKYNOTE":"false"}},"priority":3,"properties":{"UI_PROP_TABLE_URI":"SASData://CASUSER?PROCGRADBOOST_SCORE","UI_PROP_XPOS":"301","UI_PROP_YPOS":"274","UI_PROP_COLORGRP":"0","UI_PROP_IS_INPUT_EXPANDED":"false","UI_PROP_IS_OUTPUT_EXPANDED":"false","UI_PROP_USE_PERSISTED_TABLE_STRUCTURE":"false","UI_PROP_NODE_DATA_ID":"table","UI_PROP_PORT_ID|inTable|0":"54e01231-c690-4de0-8b28-264491cb5493","UI_PROP_PORT_LABEL|inTable|0":null,"UI_PROP_PORT_DESCRIPTION|inTable|0":null,"UI_PROP_PORT_ID|outTable|0":"2d0e915c-1c12-4c2e-8c57-8013e1b3511a","UI_PROP_PORT_LABEL|outTable|0":null,"UI_PROP_PORT_DESCRIPTION|outTable|0":null},"tableReference":{"referenceType":"parameter","parameterId":"id-1718393498807-3389"},"outputTableArguments":{"advancedOptions":[],"arguments":{}}}},"parameters":{"id-1718393414513-3048":{"parameterType":"table","version":1,"id":"id-1718393414513-3048","name":"gradboost_astore","parameterUsage":"INPUT_OUTPUT","defaultValue":{"table":{"name":"PROCGRADBOOST_ASTORE","version":1},"source":{"id":"CASUSER","name":"CASUSER","providerId":"Compute","parentId":"13028236-7c4e-4ef9-947d-8e490bea4345","hasTables":true,"hasEngines":false,"creationTimeStamp":"0001-01-01T00:00:00.000Z","modifiedTimeStamp":"0001-01-01T00:00:00.000Z","attributes":{"concatenationCount":0,"engineName":"CAS","fileFormat":"","flags":0,"options":"CASLIB=\"CASUSER\" SESSREF=\"CASAUTO\";","physicalName":"6e221ce4-8c07-a848-9fdb-398f8e8fe6a9","readOnly":false,"version":2,"casPort":5570,"casHost":"sas-cas-server-default-client"},"version":1,"links":[{"method":"GET","rel":"self","href":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER","uri":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER","type":"application/vnd.sas.data.source"},{"method":"GET","rel":"alternate","href":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER","uri":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER","type":"application/vnd.sas.data.source.summary"},{"method":"GET","rel":"up","href":"/dataSources/providers/Compute/sources","uri":"/dataSources/providers/Compute/sources","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.source"},{"method":"GET","rel":"parent","href":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345","uri":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345","type":"application/vnd.sas.data.source"},{"method":"GET","rel":"tables","href":"/dataTables/dataSources/Compute~fs~13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER/tables","uri":"/dataTables/dataSources/Compute~fs~13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER/tables","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.table"},{"method":"GET","rel":"sessionScoped","href":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345/children?sessionId=a05b561c-bdfb-4013-8b74-ec4f8e6fd5e0-ses0000","uri":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345/children?sessionId=a05b561c-bdfb-4013-8b74-ec4f8e6fd5e0-ses0000","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.source"},{"method":"GET","rel":"session","href":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345/sessions/a05b561c-bdfb-4013-8b74-ec4f8e6fd5e0-ses0000","uri":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345/sessions/a05b561c-bdfb-4013-8b74-ec4f8e6fd5e0-ses0000","type":"application/vnd.sas.data.session"}]}}},"id-1718393498807-3389":{"parameterType":"table","version":1,"id":"id-1718393498807-3389","name":"gradboost_score","parameterUsage":"INPUT_OUTPUT","defaultValue":{"table":{"name":"PROCGRADBOOST_SCORE","version":1},"source":{"id":"CASUSER","name":"CASUSER","providerId":"Compute","parentId":"13028236-7c4e-4ef9-947d-8e490bea4345","hasTables":true,"hasEngines":false,"creationTimeStamp":"0001-01-01T00:00:00.000Z","modifiedTimeStamp":"0001-01-01T00:00:00.000Z","attributes":{"concatenationCount":0,"engineName":"CAS","fileFormat":"","flags":0,"options":"CASLIB=\"CASUSER\" SESSREF=\"CASAUTO\";","physicalName":"6e221ce4-8c07-a848-9fdb-398f8e8fe6a9","readOnly":false,"version":2,"casPort":5570,"casHost":"sas-cas-server-default-client"},"version":1,"links":[{"method":"GET","rel":"self","href":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER","uri":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER","type":"application/vnd.sas.data.source"},{"method":"GET","rel":"alternate","href":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER","uri":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER","type":"application/vnd.sas.data.source.summary"},{"method":"GET","rel":"up","href":"/dataSources/providers/Compute/sources","uri":"/dataSources/providers/Compute/sources","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.source"},{"method":"GET","rel":"parent","href":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345","uri":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345","type":"application/vnd.sas.data.source"},{"method":"GET","rel":"tables","href":"/dataTables/dataSources/Compute~fs~13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER/tables","uri":"/dataTables/dataSources/Compute~fs~13028236-7c4e-4ef9-947d-8e490bea4345~fs~CASUSER/tables","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.table"},{"method":"GET","rel":"sessionScoped","href":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345/children?sessionId=a05b561c-bdfb-4013-8b74-ec4f8e6fd5e0-ses0000","uri":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345/children?sessionId=a05b561c-bdfb-4013-8b74-ec4f8e6fd5e0-ses0000","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.source"},{"method":"GET","rel":"session","href":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345/sessions/a05b561c-bdfb-4013-8b74-ec4f8e6fd5e0-ses0000","uri":"/dataSources/providers/Compute/sources/13028236-7c4e-4ef9-947d-8e490bea4345/sessions/a05b561c-bdfb-4013-8b74-ec4f8e6fd5e0-ses0000","type":"application/vnd.sas.data.session"}]}}}},"connections":[{"sourcePort":{"node":"id-1718392919930-2141","portName":"outTables","index":0},"targetPort":{"node":"id-1718393414513-3048","portName":"inTable","index":0}},{"sourcePort":{"node":"id-1718392919930-2141","portName":"outTables","index":1},"targetPort":{"node":"id-1718393498807-3389","portName":"inTable","index":0}},{"sourcePort":{"node":"id-1718393414513-3048","portName":"outTable","index":0},"targetPort":{"node":"id-1718392836461-1639","portName":"astore","index":0}},{"sourcePort":{"node":"id-1718393498807-3389","portName":"outTable","index":0},"targetPort":{"node":"id-1718392836461-1639","portName":"scoredTable","index":0}}],"extendedProperties":{},"stickyNotes":[]}